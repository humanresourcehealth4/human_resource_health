<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Needs-based health workforce planning for pregnancy care in Brazil</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="hrh_model_files/libs/clipboard/clipboard.min.js"></script>
<script src="hrh_model_files/libs/quarto-html/quarto.js"></script>
<script src="hrh_model_files/libs/quarto-html/popper.min.js"></script>
<script src="hrh_model_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="hrh_model_files/libs/quarto-html/anchor.min.js"></script>
<link href="hrh_model_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="hrh_model_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="hrh_model_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="hrh_model_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="hrh_model_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="hrh_model_files/libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="hrh_model_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="hrh_model_files/libs/datatables-binding-0.30/datatables.js"></script>
<script src="hrh_model_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="hrh_model_files/libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="hrh_model_files/libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="hrh_model_files/libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="hrh_model_files/libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="hrh_model_files/libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#preparing-r-environment" id="toc-preparing-r-environment" class="nav-link" data-scroll-target="#preparing-r-environment">Preparing R environment</a></li>
  <li><a href="#defining-scope" id="toc-defining-scope" class="nav-link" data-scroll-target="#defining-scope">1 - Defining Scope</a></li>
  <li><a href="#analysis-of-population-health-service-needs" id="toc-analysis-of-population-health-service-needs" class="nav-link" data-scroll-target="#analysis-of-population-health-service-needs">2 - Analysis of population health service needs</a>
  <ul class="collapse">
  <li><a href="#health-status-h-and-sus-dependent-population-sd" id="toc-health-status-h-and-sus-dependent-population-sd" class="nav-link" data-scroll-target="#health-status-h-and-sus-dependent-population-sd">2.1. Health Status (H) and SUS dependent population (SD)</a></li>
  <li><a href="#estimating-services-l" id="toc-estimating-services-l" class="nav-link" data-scroll-target="#estimating-services-l">2.2. Estimating services (L)</a></li>
  </ul></li>
  <li><a href="#translating-the-evidence-based-service-requirements-into-health-workforce-requirement" id="toc-translating-the-evidence-based-service-requirements-into-health-workforce-requirement" class="nav-link" data-scroll-target="#translating-the-evidence-based-service-requirements-into-health-workforce-requirement">3 - Translating the evidence-based service requirements into health workforce requirement</a>
  <ul class="collapse">
  <li><a href="#matching-skills-and-competencies-with-interventions-needed" id="toc-matching-skills-and-competencies-with-interventions-needed" class="nav-link" data-scroll-target="#matching-skills-and-competencies-with-interventions-needed">3.1. Matching skills and competencies with interventions needed</a></li>
  <li><a href="#eliciting-workload-measures" id="toc-eliciting-workload-measures" class="nav-link" data-scroll-target="#eliciting-workload-measures">3.2. Eliciting workload measures</a></li>
  </ul></li>
  <li><a href="#exploring-resource-implications" id="toc-exploring-resource-implications" class="nav-link" data-scroll-target="#exploring-resource-implications">4 - Exploring resource implications</a>
  <ul class="collapse">
  <li><a href="#transforming-supply-data" id="toc-transforming-supply-data" class="nav-link" data-scroll-target="#transforming-supply-data">4.1. Transforming supply data</a></li>
  <li><a href="#comparing-demand-and-supply" id="toc-comparing-demand-and-supply" class="nav-link" data-scroll-target="#comparing-demand-and-supply">4.2. Comparing demand and supply</a>
  <ul class="collapse">
  <li><a href="#demand-vs-supply---graph" id="toc-demand-vs-supply---graph" class="nav-link" data-scroll-target="#demand-vs-supply---graph">4.2.1. Demand vs Supply - Graph</a></li>
  <li><a href="#demand-vs-supply---map" id="toc-demand-vs-supply---map" class="nav-link" data-scroll-target="#demand-vs-supply---map">4.2.2. Demand vs Supply - Map</a></li>
  </ul></li>
  <li><a href="#exploring-cost-implication" id="toc-exploring-cost-implication" class="nav-link" data-scroll-target="#exploring-cost-implication">4.3. Exploring cost implication</a></li>
  </ul></li>
  <li><a href="#conducting-sensitivity-analysis" id="toc-conducting-sensitivity-analysis" class="nav-link" data-scroll-target="#conducting-sensitivity-analysis">5. Conducting sensitivity analysis</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  <li><a href="#appendix-a---fte" id="toc-appendix-a---fte" class="nav-link" data-scroll-target="#appendix-a---fte">Appendix A - FTE</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Needs-based health workforce planning for pregnancy care in Brazil</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This supplementary material describes the methodological procedures, as well as documents the codes, based on R language, used for this analysis.</p>
<p>We adapted Asamani et al.&nbsp;(2021) orientations in order build a needs-based health workforce planning for Brazilian context.</p>
<p>Asamani et al.&nbsp;(2021) suggest a set of six consideration that researchers should follow when developing needs based workforce planning, which are:</p>
<ol type="1">
<li><p><strong>Defining the scope</strong> - defining jurisdictional coverage, health system objective and timeframe.</p></li>
<li><p><strong>Analysis of the population health service needs</strong> - population demography, health status, level of service</p></li>
<li><p><strong>Translating the evidence-based service requirement into health workforce requirement</strong> - matching health services with competent professionals, eliciting measures of productivity</p></li>
<li><p><strong>Exploring resource implications</strong> - comparing demand and supply, cost implications)</p></li>
<li><p><strong>Conducting sensitivity analysis</strong> - perform simulation according to parameter uncertainty or policy scenarios</p></li>
<li><p><strong>Conducting model validation</strong> - compare to previous experiences and stakeholder consultation</p></li>
</ol>
<p>The following flowchart presents the main stages.</p>
<iframe src="https://cawemo.com/embed/a6cb74ff-2512-4dd3-8294-67b575267775" style="width:700px;height:500px;border:1px solid #ccc" allowfullscreen="">
</iframe>
</section>
<section id="preparing-r-environment" class="level1">
<h1>Preparing R environment</h1>
<p>Before making any progress, we need to load the R libraries that will assist performing our analysis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geojsonio)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RODBC)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geobr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="defining-scope" class="level1">
<h1>1 - Defining Scope</h1>
<p>The <strong>jurisdictional coverage</strong> was <strong>health regions of Goias state</strong>. Goiás is in the middle-west of Brazil. The objective of analysis was targeted to <strong>registered</strong> <strong>nurse (RN) and physician</strong> <strong>health workforce planning</strong> for <strong>pregnant</strong> and <strong>newborn</strong> in the <strong>primary healthcare (PMC)</strong>. We employed <strong>demand</strong> <strong>forecasts</strong> for the following <strong>two years</strong> using artificial intelligence algorithms.</p>
<p>The following figure illustrates the 18 health regions of Goiás state.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="imagens/mapa%20-%20regiões%20de%20saúde.png" class="img-fluid figure-img" width="536"></p>
</figure>
</div>
</section>
<section id="analysis-of-population-health-service-needs" class="level1">
<h1>2 - Analysis of population health service needs</h1>
<p>Each pregnant will require a set of services during pregnancy and after delivery according to recommendation of Brazilian Minister of Health. The same happens for the baby as soon as it is born.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="imagens/eq1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
<p>where:</p>
<ul>
<li>NHS represents Needed Health Services (NHS) which is the minimal programmatic services needed to address each the health status in a health region <em>r</em> in a given time <em>t</em>.</li>
<li>SD represents a percentage of population which dependent of Brazilian Health Unified System (Sistema Único de Saúde - SUS) in a given health region <em>r</em> and <em>t.</em></li>
<li>H represents the health status - births - for each month <em>t</em> and a region <em>r</em>.</li>
<li>L represents the number of services of type <em>y</em> required for each pregnant or baby in given time <em>t</em> before and after the child birth. The index goes from 0 to 32 because each month has programmatic services dedicated to either the pregnant woman (from t = 0 until t = 9) or the baby (from t = 9 until t = 32).</li>
</ul>
<section id="health-status-h-and-sus-dependent-population-sd" class="level3">
<h3 class="anchored" data-anchor-id="health-status-h-and-sus-dependent-population-sd">2.1. Health Status (H) and SUS dependent population (SD)</h3>
<p>The following chunk shows the number of monthly births for each health region.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#reading and selecting variables</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>predictions <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"~/GitHub/human_resource_health/03_hrh_model/data/live_births_projectios_mlp.xlsx"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>               <span class="fu">select</span>(ibge, date, complete_date, birth_s) <span class="sc">|&gt;</span> </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>               <span class="fu">rename</span>(<span class="at">qtt =</span> birth_s) <span class="sc">|&gt;</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>               <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">as.character</span>(complete_date)) <span class="sc">|&gt;</span> </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>               <span class="fu">filter</span>(qtt <span class="sc">!=</span> <span class="st">"NA"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># reading health insurance data</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"~/GitHub/human_resource_health/03_hrh_model/data/beneficiarios_plano_saude.csv"</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(mes <span class="sc">==</span> <span class="st">"06"</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>         <span class="fu">mutate</span>(<span class="at">perc_sus =</span> (<span class="dv">100</span> <span class="sc">-</span> percentual_pop_coberta)<span class="sc">/</span><span class="dv">100</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>         <span class="fu">select</span>(cod_regsaud, perc_sus, regiao_saude) </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># joining both dataframes to deduce the population covered by health insurance</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>predictions <span class="ot">&lt;-</span> </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  predictions <span class="sc">|&gt;</span>  </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(health_insurance, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ibge"</span><span class="ot">=</span><span class="st">"cod_regsaud"</span>)) <span class="sc">|&gt;</span>  </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sus_qtt =</span> <span class="fu">round</span>(qtt <span class="sc">*</span> perc_sus)) </span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(predictions)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,512
Columns: 7
$ ibge          &lt;dbl&gt; 52001, 52002, 52003, 52004, 52005, 52006, 52007, 52008, …
$ date          &lt;chr&gt; "2019-01-01", "2019-01-01", "2019-01-01", "2019-01-01", …
$ complete_date &lt;dttm&gt; 2019-01-01, 2019-01-01, 2019-01-01, 2019-01-01, 2019-01…
$ qtt           &lt;dbl&gt; 2305, 1089, 361, 1088, 346, 58, 124, 151, 104, 110, 640,…
$ perc_sus      &lt;dbl&gt; 0.5125, 0.7536, 0.8856, 0.8614, 0.6996, 0.9466, 0.9426, …
$ regiao_saude  &lt;chr&gt; "Central", "Centro Sul", "Entorno Norte", "Entorno Sul",…
$ sus_qtt       &lt;dbl&gt; 1181, 821, 320, 937, 242, 55, 117, 138, 96, 97, 464, 194…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>predictions <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(complete_date <span class="sc">&lt;</span> <span class="st">"2025-01-01"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> complete_date, <span class="at">y =</span> sus_qtt)) <span class="sc">+</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>regiao_saude, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"Date"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"SUS quantity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="hrh_model_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="estimating-services-l" class="level3">
<h3 class="anchored" data-anchor-id="estimating-services-l">2.2. Estimating services (L)</h3>
<p>For each birth we quantified the number and types of procedures needed to assist pregnant women and the newborn in the primary health care (PHC) setting.</p>
<p>There is a technical note - produced for SUS - which describes the type and frequency of procedures women are supposed to get each month before and after child birth.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://www.conass.org.br/biblioteca/saude-da-mulher-na-gestacao-parto-e-puerperio/"><img src="imagens/nota.png" class="img-fluid figure-img" width="324"></a></p>
</figure>
</div>
<p>The number and variety of health procedures needed for each pregnant were calculated using an API developed for this project. The API reads the number of births in a given health region (variable <code>ibge</code>) according to the variable <code>sus_qtt</code> and calculates the number of procedures for previous and subsequent months for each pregnant women and newborn.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>services <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">data_frame</span>()</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(predictions)){</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  row <span class="ot">&lt;-</span> predictions[i,]</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  url <span class="ot">=</span> <span class="fu">paste</span>(<span class="st">"http://200.137.215.27:5025/calcula_procedimentos?mes_ano="</span>, </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>              <span class="fu">substring</span>(row<span class="sc">$</span>date, <span class="dv">1</span>, <span class="dv">7</span>), </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>              <span class="st">"&amp;nascidos_vivos="</span>, </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>              <span class="fu">round</span>(row<span class="sc">$</span>sus_qtt, <span class="dv">0</span>), <span class="at">sep =</span> <span class="st">''</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  temp <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(url)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  temp<span class="sc">$</span>ibge <span class="ot">&lt;-</span> row<span class="sc">$</span>ibge</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  temp<span class="sc">$</span>regiao <span class="ot">&lt;-</span> row<span class="sc">$</span>regiao_saude</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  temp<span class="sc">$</span>data <span class="ot">&lt;-</span> row<span class="sc">$</span>date</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  temp<span class="sc">$</span>qtd <span class="ot">&lt;-</span> row<span class="sc">$</span>sus_qtt</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  services <span class="ot">&lt;-</span> <span class="fu">rbind</span>(temp, services)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Chamando:"</span>,url))</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This dataframe has 13 variables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(services)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "ibge"            "health_region"   "date"            "sus_qtt"        
 [5] "procedure"       "month"           "month_performed" "sigtap"         
 [9] "parameter"       "type"            "target_public"   "level_service"  </code></pre>
</div>
</div>
<p>where:</p>
<ul>
<li><p>ibge: code that identifies each health region</p></li>
<li><p>health_region: name of the health region</p></li>
<li><p>date: date of birth</p></li>
<li><p>sus_qtt (H x SD): number of births of SUS depedent population</p></li>
<li><p>procedure (L): name of the procedure of type y</p></li>
<li><p>month: programmed month of procedure, which varies from 1 (second month of gestation) to 32 (child consultation in the 24th month of life). Zero represents the month of birth.</p></li>
<li><p>month_performed: month when procedure of type y is programmed to be performed</p></li>
<li><p>sigtap: code used by SUS to identify the procedure of type y</p></li>
<li><p>parameter: the number of procedures of type y is needed according in a given month (month)</p></li>
<li><p>type: type of procedure (consultation, vaccine, exam, delivery, educational action)</p></li>
<li><p>target_public: target audience (mother, newborn, high-risk pregnant woman)</p></li>
<li><p>level_service: level of service (primary care, secondary care)</p>
<p>Since our objective is primary care, we filtered only procedures performed in this level of service.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter just PHC setting</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>phc_services <span class="ot">&lt;-</span> services <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">filter</span>(level_service <span class="sc">==</span> <span class="st">"APS"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>                <span class="fu">filter</span>(month <span class="sc">&lt;=</span> <span class="dv">24</span>) <span class="sc">|&gt;</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">procedure_qtt =</span> sus_qtt <span class="sc">*</span> parameter) <span class="sc">|&gt;</span> </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>                <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">"Consultas ou Visitas"</span> <span class="sc">|</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>                       type <span class="sc">==</span> <span class="st">"Ações Educacionais"</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(phc_services)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 51,408
Columns: 13
$ ibge            &lt;dbl&gt; 52018, 52018, 52018, 52018, 52018, 52018, 52018, 52018…
$ health_region   &lt;chr&gt; "São Patrício II", "São Patrício II", "São Patrício II…
$ date            &lt;chr&gt; "2025-12-01", "2025-12-01", "2025-12-01", "2025-12-01"…
$ sus_qtt         &lt;dbl&gt; 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140,…
$ procedure       &lt;chr&gt; "Consulta pré-natal", "Visita domiciliar", "Consulta p…
$ month           &lt;dbl&gt; -8, -7, -7, -6, -6, -6, -6, -5, -5, -4, -4, -3, -3, -3…
$ month_performed &lt;chr&gt; "2025-04-01", "2025-05-01", "2025-05-01", "2025-06-01"…
$ sigtap          &lt;dbl&gt; 301010110, 301010137, 301010110, 301010137, 301010153,…
$ parameter       &lt;dbl&gt; 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.1, 1.0, 1.0, 1.0, 1.0,…
$ type            &lt;chr&gt; "Consultas ou Visitas", "Consultas ou Visitas", "Consu…
$ target_public   &lt;chr&gt; "Todas gestantes", "Todas gestantes", "Todas gestantes…
$ level_service   &lt;chr&gt; "APS", "APS", "APS", "APS", "APS", "APS", "APS", "APS"…
$ procedure_qtt   &lt;dbl&gt; 140, 140, 140, 140, 140, 140, 14, 140, 140, 140, 140, …</code></pre>
</div>
</div>
</section>
</section>
<section id="translating-the-evidence-based-service-requirements-into-health-workforce-requirement" class="level1">
<h1>3 - Translating the evidence-based service requirements into health workforce requirement</h1>
<p>According to Asamani e al.&nbsp;(2021), this step includes matching skills and competencies with interventions needed and eliciting workload measures. Asamani et al.&nbsp;(2021) uses concepts from the Workload Indicator of Staffing Needs (WISN).</p>
<section id="matching-skills-and-competencies-with-interventions-needed" class="level3">
<h3 class="anchored" data-anchor-id="matching-skills-and-competencies-with-interventions-needed">3.1. Matching skills and competencies with interventions needed</h3>
<p>The <code>phc_services</code> dataframe contains the <code>sigtap</code> variable. This variable represents a procedure and will be used to join with a second dataset which identifies the health professional who are able to perform the procedure.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># loading dataframe which combines procedures and the respective professional</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>procedures_professional <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"~/GitHub/human_resource_health/03_hrh_model/data/calendario-procedimentos.xlsx"</span>, </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sheet =</span> <span class="st">"procedimentos_profissionais"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">select</span>(codigo_sigtap, categoria, CBO) <span class="sc">|&gt;</span> </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">mutate</span>(<span class="at">codigo_sigtap =</span> <span class="fu">as.numeric</span>(codigo_sigtap)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Mackenzie et al.&nbsp;(2019) introduces a W parameter in the demand equation to represent the proportion of the services made by a given cadre. In our case, procedures performed by two cadres will be split equally among them. Prenatal consultation, for example, can be performed by either RN or physician, so 50% of the procedure volume will be allocated for both professionals.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the procedure 301010080 is growth and development consultation. It is divided by 10 because the same procedure id is used for all procedure.  </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>qtt_professional <span class="ot">&lt;-</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  procedures_professional <span class="sc">|&gt;</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(codigo_sigtap) <span class="sc">|&gt;</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">|&gt;</span> </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">case_when</span>(codigo_sigtap <span class="sc">==</span> <span class="st">'301010080'</span> <span class="sc">~</span> n<span class="sc">/</span><span class="dv">10</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>                       codigo_sigtap <span class="sc">==</span> <span class="st">'101010010'</span> <span class="sc">~</span> n<span class="sc">/</span><span class="dv">2</span>,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>                       <span class="cn">TRUE</span> <span class="sc">~</span> n))</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># In the following code:</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) filter for only procedures performed by nurses and physicians </span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) calculate the number of procedures exclusive by cadre according to the last code</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>professional_services <span class="ot">&lt;-</span> phc_services <span class="sc">|&gt;</span> </span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">left_join</span>(qtt_professional, </span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"sigtap"</span> <span class="ot">=</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"codigo_sigtap"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">mutate</span>(<span class="at">qtt_cadre =</span> procedure_qtt<span class="sc">/</span>n) <span class="sc">|&gt;</span> </span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">left_join</span>(procedures_professional, <span class="at">by =</span> <span class="fu">c</span>( <span class="st">"sigtap"</span><span class="ot">=</span><span class="st">"codigo_sigtap"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">filter</span>(categoria <span class="sc">==</span> <span class="st">"Enfermeiro"</span> <span class="sc">|</span> </span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>                                   categoria <span class="sc">==</span> <span class="st">"Médico"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">rename</span>(<span class="at">cadre =</span> categoria)</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(professional_services)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 305,424
Columns: 17
$ ibge            &lt;dbl&gt; 52018, 52018, 52018, 52018, 52018, 52018, 52018, 52018…
$ health_region   &lt;chr&gt; "São Patrício II", "São Patrício II", "São Patrício II…
$ date            &lt;chr&gt; "2025-12-01", "2025-12-01", "2025-12-01", "2025-12-01"…
$ sus_qtt         &lt;dbl&gt; 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140,…
$ procedure       &lt;chr&gt; "Consulta pré-natal", "Consulta pré-natal", "Consulta …
$ month           &lt;dbl&gt; -8, -8, -7, -7, -6, -6, -6, -6, -5, -5, -4, -4, -3, -3…
$ month_performed &lt;chr&gt; "2025-04-01", "2025-04-01", "2025-05-01", "2025-05-01"…
$ sigtap          &lt;dbl&gt; 301010110, 301010110, 301010110, 301010110, 301010110,…
$ parameter       &lt;dbl&gt; 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.1, 0.1, 1.0, 1.0, 1.0,…
$ type            &lt;chr&gt; "Consultas ou Visitas", "Consultas ou Visitas", "Consu…
$ target_public   &lt;chr&gt; "Todas gestantes", "Todas gestantes", "Todas gestantes…
$ level_service   &lt;chr&gt; "APS", "APS", "APS", "APS", "APS", "APS", "APS", "APS"…
$ procedure_qtt   &lt;dbl&gt; 140, 140, 140, 140, 140, 140, 14, 14, 140, 140, 140, 1…
$ n               &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …
$ qtt_cadre       &lt;dbl&gt; 70, 70, 70, 70, 70, 70, 7, 7, 70, 70, 70, 70, 70, 70, …
$ cadre           &lt;chr&gt; "Enfermeiro", "Médico", "Enfermeiro", "Médico", "Enfer…
$ CBO             &lt;dbl&gt; 223505, 225130, 223505, 225130, 223505, 225130, 223505…</code></pre>
</div>
</div>
<p>The new dataframe contains the variables <code>qtt_cadre</code>, <code>categoria</code> and <code>CBO</code>, where:</p>
<ul>
<li><p>qtt_cadre: total of procedures must be executed by a professional</p></li>
<li><p>cadre: health professional that should execute that number of procedures</p></li>
<li><p>CBO: brazilian code that identifies a health professional</p></li>
</ul>
</section>
<section id="eliciting-workload-measures" class="level3">
<h3 class="anchored" data-anchor-id="eliciting-workload-measures">3.2. Eliciting workload measures</h3>
<p>The next step involves defining the service standard (SS) - the average time, in hours, a trained and motivated health professional spends to perform an intervention of type y. The available working time (AWT) is the total annual time a health worker has available after deducing absences. Once we have both parameters, it is possible to calculate the service workload (SW) which is defined as a “standard workload for health professional of category n when performing service activity y” (Asamani et al., 2021, p.&nbsp;7).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="imagens/eq2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
<p>We adapted Asamani’s equation for our case study but with no loss to the mathematical logic.</p>
<p>After including both elements, the equation 1 is complemented as below:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="imagens/eq3.svg" class="img-fluid figure-img"></p>
</figure>
</div>
<p>where:</p>
<ul>
<li><p>N is the number of professionals of category <em>n</em>, in FTE40, needed in a given region <em>r</em> and period <em>t</em>.</p></li>
<li><p>R represents a percentage of population which dependent of Brazilian Health Unified System (Sistema Único de Saúde - SUS) in a given health region <em>r</em> and <em>t.</em></p></li>
<li><p>H represents the health status - births - for each month <em>t</em> and a region <em>r</em>.</p></li>
<li><p>L represents the number of services of type <em>y</em> required for each pregnant or baby in given time <em>t</em> before and after the child birth. The index goes from 1 to 32 because each month has programmatic services dedicated to either the pregnant woman or the baby.</p></li>
<li><p>SS standard time of intervetion, in hours, performed by a trained and motivated professional. We used time collected in past experiences. Using time motion techniques Bonfim et al.&nbsp;(2014) registered that nursing appointments took about 25,3 minutes (Brazil average) in the PHC setting. Educative actions took about 73 minutes. We will use these number as reference.</p></li>
<li><p>AWT is the available working time after deducting absence. Originally this is a metric measured in years. But we adapted it since our analysis are monthly based. We used the AWT available from Bonfim et al.&nbsp;(2014).</p></li>
</ul>
<p>The following chunk of code translates the volume of programatic interventions into hours needed by a given professional.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>demand_hours <span class="ot">&lt;-</span> professional_services <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">month_performed =</span> <span class="fu">as.Date</span>(month_performed)) <span class="sc">|&gt;</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(month_performed)) <span class="sc">|&gt;</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2024</span>) <span class="sc">|&gt;</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">time_needed =</span> </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">if_else</span>(type <span class="sc">==</span> <span class="st">"Consultas ou Visitas"</span>,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>                                        qtt_cadre <span class="sc">*</span> <span class="fl">0.66</span>,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>                                        qtt_cadre <span class="sc">*</span> <span class="fl">1.266</span>))</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(demand_hours)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 43,632
Columns: 19
$ ibge            &lt;dbl&gt; 52018, 52018, 52017, 52017, 52016, 52016, 52015, 52015…
$ health_region   &lt;chr&gt; "São Patrício II", "São Patrício II", "Sul", "Sul", "S…
$ date            &lt;chr&gt; "2025-08-01", "2025-08-01", "2025-08-01", "2025-08-01"…
$ sus_qtt         &lt;dbl&gt; 140, 140, 154, 154, 183, 183, 327, 327, 107, 107, 145,…
$ procedure       &lt;chr&gt; "Consulta pré-natal", "Consulta pré-natal", "Consulta …
$ month           &lt;dbl&gt; -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8…
$ month_performed &lt;date&gt; 2024-12-01, 2024-12-01, 2024-12-01, 2024-12-01, 2024-…
$ sigtap          &lt;dbl&gt; 301010110, 301010110, 301010110, 301010110, 301010110,…
$ parameter       &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
$ type            &lt;chr&gt; "Consultas ou Visitas", "Consultas ou Visitas", "Consu…
$ target_public   &lt;chr&gt; "Todas gestantes", "Todas gestantes", "Todas gestantes…
$ level_service   &lt;chr&gt; "APS", "APS", "APS", "APS", "APS", "APS", "APS", "APS"…
$ procedure_qtt   &lt;dbl&gt; 140, 140, 154, 154, 183, 183, 327, 327, 107, 107, 145,…
$ n               &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …
$ qtt_cadre       &lt;dbl&gt; 70.0, 70.0, 77.0, 77.0, 91.5, 91.5, 163.5, 163.5, 53.5…
$ cadre           &lt;chr&gt; "Enfermeiro", "Médico", "Enfermeiro", "Médico", "Enfer…
$ CBO             &lt;dbl&gt; 223505, 225130, 223505, 225130, 223505, 225130, 223505…
$ year            &lt;dbl&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, …
$ time_needed     &lt;dbl&gt; 46.20, 46.20, 50.82, 50.82, 60.39, 60.39, 107.91, 107.…</code></pre>
</div>
</div>
<p>The final step translates the number of hours in full-time equivalent (FTE) professionals. We will divide the full time required by procedures by 126 which is the total available time for each month by professional. For more information about FTE, read appendix B of this script.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>prof_demand <span class="ot">&lt;-</span> demand_hours <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(ibge, year, month_performed, CBO, </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>               cadre, time_needed) <span class="sc">|&gt;</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">fte40 =</span> time_needed<span class="sc">/</span><span class="dv">126</span>) <span class="sc">|&gt;</span> </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(ibge, month_performed, year, CBO, cadre) <span class="sc">|&gt;</span> </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">summarise</span>(<span class="at">total_time =</span> <span class="fu">sum</span>(time_needed),</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fte40_demand =</span> <span class="fu">sum</span>(fte40),</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fte40_demand =</span> <span class="fu">round</span>(fte40_demand, <span class="dv">2</span>))</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(prof_demand)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 432
Columns: 7
Groups: ibge, month_performed, year, CBO [432]
$ ibge            &lt;dbl&gt; 52001, 52001, 52001, 52001, 52001, 52001, 52001, 52001…
$ month_performed &lt;date&gt; 2024-01-01, 2024-01-01, 2024-02-01, 2024-02-01, 2024-…
$ year            &lt;dbl&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, …
$ CBO             &lt;dbl&gt; 223505, 225130, 223505, 225130, 223505, 225130, 223505…
$ cadre           &lt;chr&gt; "Enfermeiro", "Médico", "Enfermeiro", "Médico", "Enfer…
$ total_time      &lt;dbl&gt; 37421.65, 37421.65, 38007.09, 38007.09, 37673.70, 3767…
$ fte40_demand    &lt;dbl&gt; 297.00, 297.00, 301.64, 301.64, 299.00, 299.00, 309.24…</code></pre>
</div>
</div>
<p>Asamani et al (2021) incorporates a last element which is the indirect activity rate. We will apply this element on the supply side, following Mackenzie et al.&nbsp;(2019) steps. Furthermore, these numbers represent the total number of FTE professional needed to work in a minimal set of procedures during pregnancy and newbord assistance.</p>
</section>
</section>
<section id="exploring-resource-implications" class="level1">
<h1>4 - Exploring resource implications</h1>
<p>During this step we compared the demand for health professional, calculated in the previous stages, and the supply available in a given region.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>supply <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"~/GitHub/human_resource_health/03_hrh_model/data/supply.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We will deduce the supply considering only the workload performed to assist pregnant and newborn care.</p>
<p>We used a proxy number according to the volume of consultation for pregnant and newborn care in the information system for primary care (SISAB).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>sisab <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"~/GitHub/human_resource_health/03_hrh_model/data/producao_SISAB.xls"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">select</span>(Cod_Regiao_Saude, Porcentagem)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="transforming-supply-data" class="level2">
<h2 class="anchored" data-anchor-id="transforming-supply-data">4.1. Transforming supply data</h2>
<p>Supply was calculated using the following equation:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="imagens/eq4.svg" class="img-fluid figure-img"></p>
</figure>
</div>
<p>Where:</p>
<ul>
<li><p>S represents the net supply of professionals of type <em>n</em>, in a region <em>r</em> and a period <em>t</em>.</p></li>
<li><p>A represents the total supply of professional of type <em>n</em>, in a region <em>r</em> and a period <em>t</em> without further deduction.</p></li>
<li><p>D represents the percentage of direct activities that professional of type n usually perform</p></li>
<li><p>F represents the percentage of time dedicated to caring for pregnant women and children</p></li>
</ul>
<p>Our supply dataset will eventually have duplicate values due to multiple cadre association. In order to overcome this issue, we use a standard of full time equivalent metric.</p>
<p>We multiply the value by four to represent the monthly workload. Next, we transform the number of hours into professional hours, dividing the value by 126 hours. In this way, if we have 3,040 hours of a professional available in a month, it would be the equivalent of having 24 professionals of 40 hours.</p>
<p>We also deduct the total workload dedicated to direct activities (assistance). We used as a reference 60% based on past studies.</p>
<p>We also deduct the percentage dedicated exclusively to activities to assist pregnant women and newborns. As previously presented, we used SISAB data to assess the volume of assistance to this public in comparison to others.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>supply_GO <span class="ot">&lt;-</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  supply <span class="sc">|&gt;</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_month =</span> <span class="fu">ym</span>(COMPETEN)) <span class="sc">|&gt;</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(sisab, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"cod_regsaud"</span><span class="ot">=</span><span class="st">"Cod_Regiao_Saude"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fte40_supply =</span> CH<span class="sc">/</span><span class="dv">126</span>) <span class="sc">|&gt;</span> </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">direct_supply =</span> <span class="fu">if_else</span>(CATEGORIA <span class="sc">==</span> <span class="st">"ENFERMEIRO"</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>                          fte40_supply <span class="sc">*</span> <span class="fl">0.30</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>                          fte40_supply <span class="sc">*</span> <span class="fl">0.39</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">net_supply =</span> direct_supply <span class="sc">*</span> Porcentagem) <span class="sc">|&gt;</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_month =</span> year_month <span class="sc">+</span> <span class="fu">years</span>(<span class="dv">2</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Porcentagem =</span> <span class="fu">round</span>(Porcentagem, <span class="dv">2</span>),</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">fte40_supply =</span> <span class="fu">round</span>(fte40_supply, <span class="dv">2</span>),</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">direct_supply =</span> <span class="fu">round</span>(direct_supply, <span class="dv">2</span>),</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">net_supply =</span> <span class="fu">round</span>(net_supply, <span class="dv">2</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CATEGORIA =</span> <span class="fu">if_else</span>(CATEGORIA <span class="sc">==</span> <span class="st">"ENFERMEIRO"</span>,</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Enfermeiro"</span>,<span class="st">"Médico"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year_month, cod_regsaud, regiao_saude,</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>         CATEGORIA, CH, Porcentagem, fte40_supply, </span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>         direct_supply, net_supply)</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(supply_GO)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-7bead414d3e3cc3265fa" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-7bead414d3e3cc3265fa">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432"],["2024-08-01","2024-01-01","2024-01-01","2024-05-01","2024-03-01","2024-10-01","2024-08-01","2024-06-01","2024-01-01","2024-09-01","2024-10-01","2024-07-01","2024-01-01","2024-01-01","2024-05-01","2024-06-01","2024-12-01","2024-03-01","2024-10-01","2024-01-01","2024-05-01","2024-07-01","2024-07-01","2024-06-01","2024-03-01","2024-01-01","2024-04-01","2024-12-01","2024-12-01","2024-03-01","2024-09-01","2024-10-01","2024-02-01","2024-02-01","2024-07-01","2024-05-01","2024-04-01","2024-04-01","2024-06-01","2024-09-01","2024-12-01","2024-06-01","2024-09-01","2024-10-01","2024-08-01","2024-07-01","2024-02-01","2024-06-01","2024-11-01","2024-04-01","2024-12-01","2024-09-01","2024-10-01","2024-01-01","2024-05-01","2024-10-01","2024-10-01","2024-04-01","2024-04-01","2024-06-01","2024-12-01","2024-03-01","2024-11-01","2024-01-01","2024-05-01","2024-04-01","2024-06-01","2024-12-01","2024-07-01","2024-01-01","2024-03-01","2024-08-01","2024-07-01","2024-05-01","2024-03-01","2024-01-01","2024-06-01","2024-09-01","2024-10-01","2024-05-01","2024-05-01","2024-02-01","2024-06-01","2024-06-01","2024-03-01","2024-04-01","2024-11-01","2024-05-01","2024-09-01","2024-08-01","2024-01-01","2024-06-01","2024-08-01","2024-10-01","2024-02-01","2024-06-01","2024-10-01","2024-12-01","2024-12-01","2024-10-01","2024-10-01","2024-11-01","2024-01-01","2024-12-01","2024-03-01","2024-08-01","2024-05-01","2024-06-01","2024-03-01","2024-03-01","2024-08-01","2024-02-01","2024-12-01","2024-09-01","2024-08-01","2024-02-01","2024-01-01","2024-06-01","2024-07-01","2024-02-01","2024-04-01","2024-12-01","2024-12-01","2024-09-01","2024-09-01","2024-05-01","2024-04-01","2024-07-01","2024-01-01","2024-12-01","2024-07-01","2024-03-01","2024-01-01","2024-08-01","2024-04-01","2024-08-01","2024-11-01","2024-07-01","2024-10-01","2024-11-01","2024-11-01","2024-01-01","2024-06-01","2024-12-01","2024-03-01","2024-09-01","2024-10-01","2024-04-01","2024-06-01","2024-06-01","2024-03-01","2024-09-01","2024-10-01","2024-01-01","2024-05-01","2024-12-01","2024-02-01","2024-02-01","2024-06-01","2024-08-01","2024-08-01","2024-11-01","2024-07-01","2024-01-01","2024-06-01","2024-08-01","2024-05-01","2024-02-01","2024-10-01","2024-07-01","2024-05-01","2024-09-01","2024-11-01","2024-07-01","2024-03-01","2024-01-01","2024-05-01","2024-04-01","2024-05-01","2024-02-01","2024-04-01","2024-11-01","2024-02-01","2024-04-01","2024-07-01","2024-01-01","2024-02-01","2024-03-01","2024-08-01","2024-12-01","2024-03-01","2024-07-01","2024-05-01","2024-05-01","2024-04-01","2024-03-01","2024-03-01","2024-09-01","2024-09-01","2024-07-01","2024-07-01","2024-08-01","2024-01-01","2024-04-01","2024-03-01","2024-04-01","2024-04-01","2024-07-01","2024-09-01","2024-09-01","2024-10-01","2024-02-01","2024-12-01","2024-05-01","2024-10-01","2024-07-01","2024-07-01","2024-05-01","2024-05-01","2024-04-01","2024-06-01","2024-12-01","2024-03-01","2024-03-01","2024-11-01","2024-11-01","2024-11-01","2024-07-01","2024-07-01","2024-05-01","2024-04-01","2024-09-01","2024-08-01","2024-07-01","2024-07-01","2024-04-01","2024-03-01","2024-03-01","2024-07-01","2024-01-01","2024-04-01","2024-12-01","2024-09-01","2024-01-01","2024-06-01","2024-03-01","2024-09-01","2024-10-01","2024-11-01","2024-06-01","2024-09-01","2024-08-01","2024-11-01","2024-03-01","2024-08-01","2024-11-01","2024-01-01","2024-05-01","2024-04-01","2024-03-01","2024-09-01","2024-09-01","2024-11-01","2024-02-01","2024-11-01","2024-02-01","2024-11-01","2024-11-01","2024-12-01","2024-12-01","2024-09-01","2024-12-01","2024-11-01","2024-04-01","2024-09-01","2024-11-01","2024-02-01","2024-03-01","2024-10-01","2024-08-01","2024-05-01","2024-06-01","2024-11-01","2024-04-01","2024-07-01","2024-05-01","2024-06-01","2024-07-01","2024-08-01","2024-02-01","2024-02-01","2024-06-01","2024-06-01","2024-03-01","2024-10-01","2024-10-01","2024-01-01","2024-04-01","2024-04-01","2024-11-01","2024-11-01","2024-01-01","2024-05-01","2024-02-01","2024-10-01","2024-05-01","2024-03-01","2024-03-01","2024-01-01","2024-02-01","2024-12-01","2024-09-01","2024-11-01","2024-05-01","2024-02-01","2024-06-01","2024-06-01","2024-09-01","2024-10-01","2024-01-01","2024-12-01","2024-09-01","2024-10-01","2024-04-01","2024-12-01","2024-12-01","2024-08-01","2024-07-01","2024-01-01","2024-02-01","2024-12-01","2024-08-01","2024-12-01","2024-08-01","2024-07-01","2024-07-01","2024-06-01","2024-12-01","2024-03-01","2024-09-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-10-01","2024-08-01","2024-01-01","2024-05-01","2024-02-01","2024-09-01","2024-09-01","2024-08-01","2024-08-01","2024-11-01","2024-04-01","2024-03-01","2024-09-01","2024-11-01","2024-11-01","2024-07-01","2024-05-01","2024-04-01","2024-12-01","2024-12-01","2024-03-01","2024-08-01","2024-06-01","2024-10-01","2024-10-01","2024-05-01","2024-06-01","2024-10-01","2024-05-01","2024-02-01","2024-09-01","2024-01-01","2024-05-01","2024-04-01","2024-10-01","2024-10-01","2024-02-01","2024-03-01","2024-08-01","2024-02-01","2024-02-01","2024-11-01","2024-01-01","2024-05-01","2024-02-01","2024-09-01","2024-09-01","2024-02-01","2024-12-01","2024-07-01","2024-07-01","2024-02-01","2024-02-01","2024-10-01","2024-10-01","2024-11-01","2024-01-01","2024-06-01","2024-08-01","2024-01-01","2024-02-01","2024-02-01","2024-06-01","2024-12-01","2024-10-01","2024-11-01","2024-07-01","2024-02-01","2024-06-01","2024-06-01","2024-11-01","2024-12-01","2024-08-01","2024-05-01","2024-12-01","2024-08-01","2024-07-01","2024-08-01","2024-08-01","2024-11-01","2024-08-01","2024-11-01","2024-03-01","2024-09-01","2024-10-01","2024-08-01","2024-11-01","2024-01-01"],[52017,52001,52012,52010,52015,52018,52001,52017,52008,52012,52007,52013,52001,52010,52003,52014,52007,52006,52009,52007,52017,52003,52008,52005,52007,52013,52005,52015,52013,52010,52013,52012,52007,52009,52002,52006,52001,52015,52012,52011,52001,52015,52003,52002,52009,52011,52003,52014,52011,52006,52016,52017,52018,52013,52016,52014,52013,52011,52011,52003,52018,52008,52018,52012,52014,52008,52012,52009,52012,52009,52002,52006,52007,52004,52005,52003,52011,52018,52003,52011,52018,52014,52017,52009,52016,52016,52011,52015,52007,52010,52005,52006,52018,52009,52014,52005,52010,52017,52014,52002,52016,52003,52018,52003,52003,52002,52008,52008,52001,52002,52007,52010,52008,52013,52005,52008,52005,52009,52018,52005,52007,52007,52006,52001,52002,52008,52005,52003,52014,52014,52004,52007,52016,52013,52018,52016,52017,52016,52004,52018,52008,52011,52001,52011,52003,52017,52008,52004,52015,52006,52016,52014,52005,52015,52012,52009,52004,52006,52002,52017,52004,52002,52014,52008,52008,52014,52003,52009,52017,52010,52018,52004,52008,52014,52014,52006,52009,52017,52005,52017,52017,52017,52001,52002,52013,52017,52011,52018,52018,52010,52005,52010,52014,52002,52009,52004,52013,52015,52009,52012,52006,52004,52004,52004,52011,52015,52018,52007,52010,52004,52008,52013,52016,52009,52011,52008,52006,52004,52013,52014,52003,52002,52006,52009,52015,52006,52013,52017,52004,52007,52012,52015,52007,52009,52009,52003,52017,52014,52017,52011,52001,52010,52006,52017,52001,52001,52002,52006,52006,52002,52018,52008,52010,52015,52011,52004,52002,52010,52013,52018,52010,52007,52004,52012,52016,52016,52001,52007,52015,52013,52011,52008,52001,52013,52005,52009,52018,52011,52007,52012,52012,52004,52015,52012,52002,52001,52016,52018,52015,52015,52018,52007,52016,52009,52015,52005,52003,52010,52008,52003,52012,52007,52006,52002,52010,52013,52012,52013,52016,52010,52005,52016,52005,52015,52007,52011,52010,52014,52003,52010,52004,52012,52017,52016,52012,52002,52003,52001,52004,52013,52011,52006,52004,52003,52005,52016,52013,52018,52017,52009,52003,52014,52009,52002,52001,52002,52015,52017,52002,52008,52006,52009,52016,52005,52006,52008,52001,52002,52016,52005,52001,52007,52003,52017,52004,52011,52018,52011,52004,52007,52013,52012,52016,52001,52008,52006,52005,52010,52001,52006,52008,52010,52012,52015,52017,52007,52018,52011,52006,52005,52016,52012,52012,52011,52015,52003,52016,52015,52013,52012,52009,52018,52015,52002,52011,52004,52004,52006,52016,52010,52001,52005,52010,52007,52013,52005,52010,52002,52001,52013,52015,52014,52005,52014,52001,52009,52012,52003,52014,52008,52014,52014],["Sul","Central","Rio Vermelho","Oeste II","Sudoeste I","São Patrício II","Central","Sul","Norte","Rio Vermelho","Nordeste II","São Patrício I","Central","Oeste II","Entorno Norte","Serra da Mesa","Nordeste II","Nordeste I","Oeste I","Nordeste II","Sul","Entorno Norte","Norte","Estrada de Ferro","Nordeste II","São Patrício I","Estrada de Ferro","Sudoeste I","São Patrício I","Oeste II","São Patrício I","Rio Vermelho","Nordeste II","Oeste I","Centro Sul","Nordeste I","Central","Sudoeste I","Rio Vermelho","Pirineus","Central","Sudoeste I","Entorno Norte","Centro Sul","Oeste I","Pirineus","Entorno Norte","Serra da Mesa","Pirineus","Nordeste I","Sudoeste II","Sul","São Patrício II","São Patrício I","Sudoeste II","Serra da Mesa","São Patrício I","Pirineus","Pirineus","Entorno Norte","São Patrício II","Norte","São Patrício II","Rio Vermelho","Serra da Mesa","Norte","Rio Vermelho","Oeste I","Rio Vermelho","Oeste I","Centro Sul","Nordeste I","Nordeste II","Entorno Sul","Estrada de Ferro","Entorno Norte","Pirineus","São Patrício II","Entorno Norte","Pirineus","São Patrício II","Serra da Mesa","Sul","Oeste I","Sudoeste II","Sudoeste II","Pirineus","Sudoeste I","Nordeste II","Oeste II","Estrada de Ferro","Nordeste I","São Patrício II","Oeste I","Serra da Mesa","Estrada de Ferro","Oeste II","Sul","Serra da Mesa","Centro Sul","Sudoeste II","Entorno Norte","São Patrício II","Entorno Norte","Entorno Norte","Centro Sul","Norte","Norte","Central","Centro Sul","Nordeste II","Oeste II","Norte","São Patrício I","Estrada de Ferro","Norte","Estrada de Ferro","Oeste I","São Patrício II","Estrada de Ferro","Nordeste II","Nordeste II","Nordeste I","Central","Centro Sul","Norte","Estrada de Ferro","Entorno Norte","Serra da Mesa","Serra da Mesa","Entorno Sul","Nordeste II","Sudoeste II","São Patrício I","São Patrício II","Sudoeste II","Sul","Sudoeste II","Entorno Sul","São Patrício II","Norte","Pirineus","Central","Pirineus","Entorno Norte","Sul","Norte","Entorno Sul","Sudoeste I","Nordeste I","Sudoeste II","Serra da Mesa","Estrada de Ferro","Sudoeste I","Rio Vermelho","Oeste I","Entorno Sul","Nordeste I","Centro Sul","Sul","Entorno Sul","Centro Sul","Serra da Mesa","Norte","Norte","Serra da Mesa","Entorno Norte","Oeste I","Sul","Oeste II","São Patrício II","Entorno Sul","Norte","Serra da Mesa","Serra da Mesa","Nordeste I","Oeste I","Sul","Estrada de Ferro","Sul","Sul","Sul","Central","Centro Sul","São Patrício I","Sul","Pirineus","São Patrício II","São Patrício II","Oeste II","Estrada de Ferro","Oeste II","Serra da Mesa","Centro Sul","Oeste I","Entorno Sul","São Patrício I","Sudoeste I","Oeste I","Rio Vermelho","Nordeste I","Entorno Sul","Entorno Sul","Entorno Sul","Pirineus","Sudoeste I","São Patrício II","Nordeste II","Oeste II","Entorno Sul","Norte","São Patrício I","Sudoeste II","Oeste I","Pirineus","Norte","Nordeste I","Entorno Sul","São Patrício I","Serra da Mesa","Entorno Norte","Centro Sul","Nordeste I","Oeste I","Sudoeste I","Nordeste I","São Patrício I","Sul","Entorno Sul","Nordeste II","Rio Vermelho","Sudoeste I","Nordeste II","Oeste I","Oeste I","Entorno Norte","Sul","Serra da Mesa","Sul","Pirineus","Central","Oeste II","Nordeste I","Sul","Central","Central","Centro Sul","Nordeste I","Nordeste I","Centro Sul","São Patrício II","Norte","Oeste II","Sudoeste I","Pirineus","Entorno Sul","Centro Sul","Oeste II","São Patrício I","São Patrício II","Oeste II","Nordeste II","Entorno Sul","Rio Vermelho","Sudoeste II","Sudoeste II","Central","Nordeste II","Sudoeste I","São Patrício I","Pirineus","Norte","Central","São Patrício I","Estrada de Ferro","Oeste I","São Patrício II","Pirineus","Nordeste II","Rio Vermelho","Rio Vermelho","Entorno Sul","Sudoeste I","Rio Vermelho","Centro Sul","Central","Sudoeste II","São Patrício II","Sudoeste I","Sudoeste I","São Patrício II","Nordeste II","Sudoeste II","Oeste I","Sudoeste I","Estrada de Ferro","Entorno Norte","Oeste II","Norte","Entorno Norte","Rio Vermelho","Nordeste II","Nordeste I","Centro Sul","Oeste II","São Patrício I","Rio Vermelho","São Patrício I","Sudoeste II","Oeste II","Estrada de Ferro","Sudoeste II","Estrada de Ferro","Sudoeste I","Nordeste II","Pirineus","Oeste II","Serra da Mesa","Entorno Norte","Oeste II","Entorno Sul","Rio Vermelho","Sul","Sudoeste II","Rio Vermelho","Centro Sul","Entorno Norte","Central","Entorno Sul","São Patrício I","Pirineus","Nordeste I","Entorno Sul","Entorno Norte","Estrada de Ferro","Sudoeste II","São Patrício I","São Patrício II","Sul","Oeste I","Entorno Norte","Serra da Mesa","Oeste I","Centro Sul","Central","Centro Sul","Sudoeste I","Sul","Centro Sul","Norte","Nordeste I","Oeste I","Sudoeste II","Estrada de Ferro","Nordeste I","Norte","Central","Centro Sul","Sudoeste II","Estrada de Ferro","Central","Nordeste II","Entorno Norte","Sul","Entorno Sul","Pirineus","São Patrício II","Pirineus","Entorno Sul","Nordeste II","São Patrício I","Rio Vermelho","Sudoeste II","Central","Norte","Nordeste I","Estrada de Ferro","Oeste II","Central","Nordeste I","Norte","Oeste II","Rio Vermelho","Sudoeste I","Sul","Nordeste II","São Patrício II","Pirineus","Nordeste I","Estrada de Ferro","Sudoeste II","Rio Vermelho","Rio Vermelho","Pirineus","Sudoeste I","Entorno Norte","Sudoeste II","Sudoeste I","São Patrício I","Rio Vermelho","Oeste I","São Patrício II","Sudoeste I","Centro Sul","Pirineus","Entorno Sul","Entorno Sul","Nordeste I","Sudoeste II","Oeste II","Central","Estrada de Ferro","Oeste II","Nordeste II","São Patrício I","Estrada de Ferro","Oeste II","Centro Sul","Central","São Patrício I","Sudoeste I","Serra da Mesa","Estrada de Ferro","Serra da Mesa","Central","Oeste I","Rio Vermelho","Entorno Norte","Serra da Mesa","Norte","Serra da Mesa","Serra da Mesa"],["Enfermeiro","Médico","Médico","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Médico","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Médico","Médico","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Médico","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Médico","Médico","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Médico","Médico","Médico","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Médico","Médico","Médico","Médico","Médico","Médico","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Médico","Médico","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Médico","Médico","Médico","Médico","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Médico","Médico","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Médico","Médico","Médico","Médico","Médico","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Médico","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Médico","Enfermeiro","Médico","Médico","Médico","Médico","Médico","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Médico","Enfermeiro","Médico","Médico","Médico","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Médico","Médico","Médico","Enfermeiro","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Enfermeiro","Médico","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Médico","Médico","Médico","Médico","Médico","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro","Enfermeiro"],[15611.585,100308.67,16506.655,12687.4,29115.845,17579.87,84206.10000000001,14807.76,11466.455,15442.13,8073.01,22446.27,85805.06,12157.31,19222.28,11344.795,9102.775,3997.4,9637.209999999999,10797.325,16193.815,18631.36,13000.24,18131.685,8320.674999999999,18122.995,20729.995,31136.27,23354.375,12157.31,18318.52,15051.08,10971.125,12013.925,58214.31,3741.045,98718.39999999999,29311.37,15268.33,31388.28,98275.21000000001,28629.205,20438.88,52487.6,9941.360000000001,40530.16,21577.27,12192.07,34169.08,4084.3,15607.24,15437.785,17423.45,22124.74,17549.455,11701.085,18057.82,38279.45,28685.69,18561.84,16971.57,13304.39,17492.97,15363.92,11709.775,13608.54,15059.77,9637.209999999999,15407.37,11666.325,56571.9,4192.925,9146.225,45970.1,20656.13,20543.16,28650.93,17701.53,21229.67,27695.03,16710.87,11097.13,15263.985,9680.66,18492.32,19278.765,41016.8,28081.735,7595.06,11905.3,20612.68,3567.245,17527.73,11774.95,11948.75,20243.355,11531.63,15511.65,12257.245,55355.3,17849.26,21751.07,16884.67,21924.87,19274.42,56189.54,11557.7,13174.04,86726.2,59856.72,8711.725,11896.61,10788.635,22715.66,18661.775,11336.105,17827.535,12100.825,17319.17,20091.28,8798.625,9028.91,4019.125,98257.83,56789.15,13608.54,17610.285,19648.09,10749.53,13087.14,52192.14,10015.225,16632.66,18188.17,16884.67,17358.275,16089.535,19005.03,54903.42,17571.18,10614.835,37627.7,83250.2,41364.4,22098.67,15268.33,13260.94,45366.145,28950.735,4084.3,17219.235,11814.055,21025.455,28942.045,15124.945,11774.95,51896.68,3997.4,56789.15,15442.13,51896.68,56545.83,12018.27,13608.54,10714.77,12192.07,22402.82,9150.57,14599.2,12600.5,18444.525,54886.04,13478.19,10823.395,11601.15,3523.795,9437.34,15915.735,20538.815,15768.005,16454.515,14460.16,86656.67999999999,57136.75,17640.7,16072.155,28590.1,18835.575,17406.07,12765.61,17957.885,11331.76,12018.27,58970.34,12100.825,53148.04,22098.67,28872.525,9941.360000000001,15094.53,3393.445,54364.64,51027.68,51236.24,29007.22,28633.55,18705.225,8464.059999999999,12148.62,52009.65,10545.315,18492.32,18944.2,11753.225,41016.8,10675.665,3997.4,51236.24,17844.915,11253.55,22863.39,53964.9,3480.345,12187.725,29380.89,4192.925,17736.29,15263.985,50593.18,8125.15,15029.355,29163.64,8333.709999999999,11753.225,9867.495000000001,22142.12,15741.935,11270.93,15659.38,31097.165,84188.72,11792.33,4192.925,16411.065,100395.57,98040.58,58835.645,3610.695,3610.695,59569.95,17753.67,10719.115,11905.3,27412.605,31023.3,55815.87,58005.75,10984.16,22272.47,16450.17,11705.43,8711.725,52192.14,15381.3,18240.31,18922.475,83450.07000000001,9015.875,29589.45,17736.29,40860.38,13478.19,98431.63,18505.355,18835.575,9637.209999999999,19904.445,39974,8451.025,15094.53,15203.155,51757.64,29476.48,15124.945,56919.5,97606.08,17384.345,18561.84,28807.35,27538.61,17492.97,9146.225,19244.005,9146.225,29063.705,18792.125,19135.38,11418.66,11149.27,20856,15398.68,7894.865,4084.3,57049.85,12583.12,21924.87,15124.945,18444.525,19191.865,11331.76,18653.085,16923.775,18792.125,28477.13,8590.065000000001,40139.11,13121.9,12365.87,20682.2,11331.76,54373.33,16176.435,15741.935,17375.655,14838.175,55303.16,20534.47,97858.09,46717.44,22446.27,33934.45,3610.695,59118.07,19761.06,20338.945,17558.145,22185.57,17484.28,16232.92,11579.425,19535.12,11014.575,9246.16,58466.32,97901.53999999999,57718.98,29889.255,15481.235,59735.06,13260.94,3436.895,11753.225,18822.54,21077.595,3306.545,11292.655,83554.35000000001,53095.9,15781.04,18609.635,83667.32000000001,8038.25,21238.36,16802.115,46652.265,40947.28,18822.54,31648.98,51149.34,9146.225,17740.635,16028.705,18983.305,98579.36,10632.215,3997.4,18001.335,12591.81,83076.39999999999,4192.925,13478.19,11418.66,15798.42,29159.295,15754.97,8246.809999999999,19687.195,39609.02,3827.945,20790.825,18288.105,16306.785,14434.09,29372.2,28372.85,18996.34,16980.26,29663.315,22867.735,16028.705,9446.030000000001,17145.37,28620.515,59778.51,37801.5,47130.215,48464.13,3784.495,15846.215,12504.91,83684.7,18783.435,11331.76,8298.950000000001,22659.175,21042.835,12583.12,55138.05,83493.52,22515.79,28459.75,11466.455,20278.115,12048.685,99309.32000000001,11774.95,14677.41,20882.07,12391.94,13434.74,12565.74,11340.45],[0.46,0.35,0.4,0.36,0.4,0.35,0.35,0.46,0.29,0.4,0.48,0.23,0.35,0.36,0.33,0.27,0.48,0.45,0.3,0.48,0.46,0.33,0.29,0.44,0.48,0.23,0.44,0.4,0.23,0.36,0.23,0.4,0.48,0.3,0.34,0.45,0.35,0.4,0.4,0.42,0.35,0.4,0.33,0.34,0.3,0.42,0.33,0.27,0.42,0.45,0.31,0.46,0.35,0.23,0.31,0.27,0.23,0.42,0.42,0.33,0.35,0.29,0.35,0.4,0.27,0.29,0.4,0.3,0.4,0.3,0.34,0.45,0.48,0.46,0.44,0.33,0.42,0.35,0.33,0.42,0.35,0.27,0.46,0.3,0.31,0.31,0.42,0.4,0.48,0.36,0.44,0.45,0.35,0.3,0.27,0.44,0.36,0.46,0.27,0.34,0.31,0.33,0.35,0.33,0.33,0.34,0.29,0.29,0.35,0.34,0.48,0.36,0.29,0.23,0.44,0.29,0.44,0.3,0.35,0.44,0.48,0.48,0.45,0.35,0.34,0.29,0.44,0.33,0.27,0.27,0.46,0.48,0.31,0.23,0.35,0.31,0.46,0.31,0.46,0.35,0.29,0.42,0.35,0.42,0.33,0.46,0.29,0.46,0.4,0.45,0.31,0.27,0.44,0.4,0.4,0.3,0.46,0.45,0.34,0.46,0.46,0.34,0.27,0.29,0.29,0.27,0.33,0.3,0.46,0.36,0.35,0.46,0.29,0.27,0.27,0.45,0.3,0.46,0.44,0.46,0.46,0.46,0.35,0.34,0.23,0.46,0.42,0.35,0.35,0.36,0.44,0.36,0.27,0.34,0.3,0.46,0.23,0.4,0.3,0.4,0.45,0.46,0.46,0.46,0.42,0.4,0.35,0.48,0.36,0.46,0.29,0.23,0.31,0.3,0.42,0.29,0.45,0.46,0.23,0.27,0.33,0.34,0.45,0.3,0.4,0.45,0.23,0.46,0.46,0.48,0.4,0.4,0.48,0.3,0.3,0.33,0.46,0.27,0.46,0.42,0.35,0.36,0.45,0.46,0.35,0.35,0.34,0.45,0.45,0.34,0.35,0.29,0.36,0.4,0.42,0.46,0.34,0.36,0.23,0.35,0.36,0.48,0.46,0.4,0.31,0.31,0.35,0.48,0.4,0.23,0.42,0.29,0.35,0.23,0.44,0.3,0.35,0.42,0.48,0.4,0.4,0.46,0.4,0.4,0.34,0.35,0.31,0.35,0.4,0.4,0.35,0.48,0.31,0.3,0.4,0.44,0.33,0.36,0.29,0.33,0.4,0.48,0.45,0.34,0.36,0.23,0.4,0.23,0.31,0.36,0.44,0.31,0.44,0.4,0.48,0.42,0.36,0.27,0.33,0.36,0.46,0.4,0.46,0.31,0.4,0.34,0.33,0.35,0.46,0.23,0.42,0.45,0.46,0.33,0.44,0.31,0.23,0.35,0.46,0.3,0.33,0.27,0.3,0.34,0.35,0.34,0.4,0.46,0.34,0.29,0.45,0.3,0.31,0.44,0.45,0.29,0.35,0.34,0.31,0.44,0.35,0.48,0.33,0.46,0.46,0.42,0.35,0.42,0.46,0.48,0.23,0.4,0.31,0.35,0.29,0.45,0.44,0.36,0.35,0.45,0.29,0.36,0.4,0.4,0.46,0.48,0.35,0.42,0.45,0.44,0.31,0.4,0.4,0.42,0.4,0.33,0.31,0.4,0.23,0.4,0.3,0.35,0.4,0.34,0.42,0.46,0.46,0.45,0.31,0.36,0.35,0.44,0.36,0.48,0.23,0.44,0.36,0.34,0.35,0.23,0.4,0.27,0.44,0.27,0.35,0.3,0.4,0.33,0.27,0.29,0.27,0.27],[123.9,796.1,131.01,100.69,231.08,139.52,668.3,117.52,91,122.56,64.06999999999999,178.15,680.99,96.48999999999999,152.56,90.04000000000001,72.23999999999999,31.73,76.48999999999999,85.69,128.52,147.87,103.18,143.9,66.04000000000001,143.83,164.52,247.11,185.35,96.48999999999999,145.39,119.45,87.06999999999999,95.34999999999999,462.02,29.69,783.48,232.63,121.18,249.11,779.96,227.22,162.21,416.57,78.90000000000001,321.67,171.25,96.76000000000001,271.18,32.42,123.87,122.52,138.28,175.59,139.28,92.87,143.32,303.81,227.66,147.32,134.7,105.59,138.83,121.94,92.93000000000001,108,119.52,76.48999999999999,122.28,92.59,448.98,33.28,72.59,364.84,163.94,163.04,227.39,140.49,168.49,219.8,132.63,88.06999999999999,121.14,76.83,146.76,153.01,325.53,222.87,60.28,94.48999999999999,163.59,28.31,139.11,93.45,94.83,160.66,91.52,123.11,97.28,439.33,141.66,172.63,134.01,174.01,152.97,445.95,91.73,104.56,688.3,475.05,69.14,94.42,85.62,180.28,148.11,89.97,141.49,96.04000000000001,137.45,159.45,69.83,71.66,31.9,779.8200000000001,450.71,108,139.76,155.94,85.31,103.87,414.22,79.48999999999999,132.01,144.35,134.01,137.76,127.69,150.83,435.74,139.45,84.23999999999999,298.63,660.72,328.29,175.39,121.18,105.25,360.05,229.77,32.42,136.66,93.76000000000001,166.87,229.7,120.04,93.45,411.88,31.73,450.71,122.56,411.88,448.78,95.38,108,85.04000000000001,96.76000000000001,177.8,72.62,115.87,100,146.39,435.6,106.97,85.90000000000001,92.06999999999999,27.97,74.90000000000001,126.32,163.01,125.14,130.59,114.76,687.75,453.47,140.01,127.56,226.91,149.49,138.14,101.31,142.52,89.93000000000001,95.38,468.02,96.04000000000001,421.81,175.39,229.15,78.90000000000001,119.8,26.93,431.47,404.98,406.64,230.22,227.25,148.45,67.18000000000001,96.42,412.78,83.69,146.76,150.35,93.28,325.53,84.73,31.73,406.64,141.63,89.31,181.46,428.29,27.62,96.73,233.18,33.28,140.76,121.14,401.53,64.48999999999999,119.28,231.46,66.14,93.28,78.31,175.73,124.94,89.45,124.28,246.8,668.16,93.59,33.28,130.25,796.79,778.1,466.95,28.66,28.66,472.78,140.9,85.06999999999999,94.48999999999999,217.56,246.22,442.98,460.36,87.18000000000001,176.77,130.56,92.90000000000001,69.14,414.22,122.07,144.76,150.18,662.3,71.55,234.84,140.76,324.29,106.97,781.2,146.87,149.49,76.48999999999999,157.97,317.25,67.06999999999999,119.8,120.66,410.77,233.94,120.04,451.74,774.65,137.97,147.32,228.63,218.56,138.83,72.59,152.73,72.59,230.66,149.14,151.87,90.62,88.48999999999999,165.52,122.21,62.66,32.42,452.78,99.87,174.01,120.04,146.39,152.32,89.93000000000001,148.04,134.32,149.14,226.01,68.18000000000001,318.56,104.14,98.14,164.14,89.93000000000001,431.53,128.38,124.94,137.9,117.76,438.91,162.97,776.65,370.77,178.15,269.32,28.66,469.19,156.83,161.42,139.35,176.08,138.76,128.83,91.90000000000001,155.04,87.42,73.38,464.02,777,458.09,237.22,122.87,474.09,105.25,27.28,93.28,149.39,167.28,26.24,89.62,663.13,421.4,125.25,147.7,664.03,63.8,168.56,133.35,370.26,324.98,149.39,251.18,405.95,72.59,140.8,127.21,150.66,782.38,84.38,31.73,142.87,99.94,659.34,33.28,106.97,90.62,125.38,231.42,125.04,65.45,156.25,314.36,30.38,165.01,145.14,129.42,114.56,233.11,225.18,150.76,134.76,235.42,181.49,127.21,74.97,136.07,227.15,474.43,300.01,374.05,384.64,30.04,125.76,99.25,664.16,149.07,89.93000000000001,65.86,179.83,167.01,99.87,437.6,662.65,178.7,225.87,91,160.94,95.62,788.17,93.45,116.49,165.73,98.34999999999999,106.62,99.73,90],[37.17,310.48,51.09,39.27,69.31999999999999,41.86,200.49,35.26,35.49,36.77,24.99,53.44,204.3,37.63,59.5,35.11,21.67,9.52,29.83,25.71,50.12,57.67,30.95,43.17,25.75,56.09,64.16,74.13,55.61,37.63,56.7,35.84,26.12,28.6,180.19,11.58,305.56,69.79000000000001,36.35,97.15000000000001,304.19,68.16,63.26,124.97,30.77,96.5,51.37,29.03,105.76,9.720000000000001,37.16,36.76,53.93,52.68,41.78,36.22,55.89,91.14,88.79000000000001,57.45,40.41,31.68,41.65,36.58,36.24,32.4,46.61,29.83,47.69,27.78,134.7,9.98,21.78,142.29,63.94,48.91,88.68000000000001,54.79,50.55,85.72,39.79,34.35,47.25,29.96,57.24,59.67,97.66,86.92,23.51,28.35,63.8,11.04,54.25,28.04,28.45,62.66,27.46,48.01,37.94,171.34,55.25,51.79,40.2,52.2,59.66,133.78,35.77,31.37,206.49,185.27,20.74,36.82,33.39,54.08,44.43,35.09,42.45,28.81,41.24,62.19,20.95,27.95,9.57,304.13,135.21,32.4,41.93,46.78,33.27,31.16,124.27,23.85,39.6,56.3,40.2,41.33,38.31,58.83,130.72,54.39,32.86,89.59,198.21,98.48999999999999,52.62,47.26,31.57,140.42,89.61,9.720000000000001,41,36.57,65.08,68.91,46.82,28.04,123.56,9.52,135.21,47.8,160.63,175.02,28.61,32.4,33.16,29.03,53.34,28.32,45.19,39,57.09,130.68,32.09,33.5,27.62,10.91,29.21,37.89,63.57,37.54,50.93,44.76,206.33,136.04,54.6,49.75,88.48999999999999,58.3,41.44,39.51,42.76,26.98,28.61,182.53,28.81,126.54,52.62,89.37,30.77,35.94,10.5,129.44,121.49,121.99,89.78,88.63,57.9,26.2,37.6,160.98,32.64,57.24,58.64,27.98,97.66,33.04,9.52,121.99,55.23,26.79,54.44,128.49,10.77,29.02,69.95,9.98,54.9,36.34,156.6,25.15,35.78,69.44,25.79,27.98,30.54,52.72,37.48,34.89,48.47,96.25,200.45,28.08,9.98,39.07,310.75,303.46,182.11,11.18,11.18,184.38,42.27,33.18,28.35,84.84999999999999,96.02,132.89,138.11,26.15,53.03,39.17,27.87,20.74,161.55,36.62,56.46,58.57,198.69,21.47,91.59,54.9,97.29000000000001,32.09,304.67,57.28,44.85,29.83,61.61,95.18000000000001,20.12,35.94,36.2,123.23,91.23999999999999,46.82,135.52,302.11,41.39,57.45,68.59,85.23999999999999,41.65,21.78,59.56,28.31,89.95999999999999,44.74,59.23,27.19,34.51,64.55,36.66,24.44,9.720000000000001,135.83,38.95,52.2,46.82,57.09,59.4,26.98,44.41,40.29,44.74,67.8,26.59,95.56999999999999,40.62,29.44,64.02,26.98,168.3,50.07,37.48,41.37,45.93,171.18,48.89,302.89,144.6,53.44,105.04,11.18,140.76,61.17,62.95,41.81,52.82,54.12,50.24,27.57,60.47,34.09,28.62,180.97,303.03,178.65,92.51000000000001,36.86,184.89,31.57,10.64,27.98,58.26,65.23999999999999,10.23,34.95,198.94,126.42,37.57,44.31,199.21,24.88,65.73999999999999,40.01,144.4,97.48999999999999,58.26,97.95999999999999,158.32,21.78,54.91,49.61,58.76,305.13,32.91,9.52,42.86,38.97,197.8,9.98,32.09,27.19,48.9,69.43000000000001,48.77,25.53,60.94,94.31,11.85,64.34999999999999,56.61,50.47,34.37,90.91,67.55,58.8,40.43,70.63,54.45,49.61,29.24,40.82,88.59,185.03,90,145.88,150.01,11.71,37.73,38.71,199.25,44.72,26.98,25.69,53.95,65.13,38.95,131.28,198.79,53.61,88.09,35.49,62.77,37.29,307.39,28.04,34.95,49.72,29.5,31.99,29.92,27],[17.2,108.01,20.37,14.1,27.43,14.59,69.75,16.31,10.31,14.66,12.05,12.38,71.06999999999999,13.51,19.78,9.449999999999999,10.46,4.28,9.029999999999999,12.4,23.19,19.17,8.99,18.88,12.42,13,28.05,29.34,12.88,13.51,13.14,14.29,12.6,8.66,62.13,5.21,106.29,27.62,14.49,40.36,105.82,26.97,21.03,43.09,9.31,40.09,17.08,7.81,43.93,4.37,11.58,17.01,18.8,12.2,13.03,9.74,12.95,37.86,36.88,19.1,14.09,9.199999999999999,14.52,14.59,9.75,9.41,18.59,9.029999999999999,19.01,8.41,46.44,4.49,10.51,65.81,27.95,16.26,36.84,19.1,16.8,35.61,13.87,9.24,21.86,9.07,17.84,18.6,40.57,34.4,11.34,10.18,27.9,4.97,18.91,8.48,7.65,27.4,9.859999999999999,22.22,10.21,59.08,17.22,17.22,14.01,17.35,19.83,46.13,10.39,9.109999999999999,71.83,63.88,10.01,13.22,9.699999999999999,12.53,19.43,10.19,18.56,8.720000000000001,14.38,27.19,10.11,13.48,4.3,105.8,46.62,9.41,18.33,15.55,8.949999999999999,8.380000000000001,57.47,11.5,12.35,13.04,14.01,12.88,17.73,18.34,60.46,18.96,9.539999999999999,37.22,68.95,40.91,17.49,21.87,9.17,64.94,35.46,4.37,12.78,9.84,28.45,27.27,18.67,8.48,57.15,4.28,46.62,22.12,74.29000000000001,60.35,7.7,9.41,9.630000000000001,7.81,17.73,8.57,20.91,14,19.9,60.44,9.32,9.01,7.43,4.9,8.84,17.54,27.8,17.37,23.57,20.71,71.77,46.91,12.65,23.02,36.76,20.32,14.45,14.18,18.69,9.69,7.7,62.94,8.720000000000001,58.53,12.19,35.36,9.31,14.33,4.72,59.87,56.19,56.42,37.3,35.07,20.18,12.64,13.5,74.45,9.48,13.26,18.28,8.470000000000001,40.57,9.6,4.28,56.42,12.8,7.21,18.1,44.3,4.84,8.779999999999999,27.68,4.49,12.72,16.82,72.43000000000001,12.13,14.27,27.48,12.44,8.470000000000001,9.24,17.53,17.34,9.390000000000001,22.43,39.98,69.73,10.08,4.49,18.08,108.1,105.56,62.79,5.03,5.03,63.58,14.74,9.640000000000001,10.18,33.58,39.89,61.46,47.62,9.390000000000001,12.29,13.65,10,10.01,74.72,14.6,17.6,18.26,69.12,10.36,36.24,12.72,40.41,9.32,105.99,13.27,19.61,9.029999999999999,21.48,39.54,9.710000000000001,14.33,14.43,56.99,36.1,18.67,46.73,105.1,12.9,20.03,27.14,33.73,14.52,10.51,18.57,8.57,35.6,19.56,19.69,9.76,10.02,21.46,14.62,11.79,4.37,46.84,13.98,12.09,18.67,13.23,18.52,9.69,19.42,12.56,19.56,26.83,12.83,39.7,14.58,7.92,21.28,9.69,77.84,19.96,17.34,12.9,18.31,59.02,16.25,105.37,66.88,12.38,43.63,5.03,65.09999999999999,20.33,27.52,13.03,12.24,18.87,23.25,8.34,20.1,9.17,8.66,62.4,105.42,61.6,36.61,17.06,63.75,9.17,4.78,8.470000000000001,18.16,28.52,4.6,10.15,69.20999999999999,43.59,11.71,19.37,69.3,12,21.85,18.51,66.78,40.5,20.31,40.69,73.22,10.51,12.72,19.78,18.32,106.15,9.56,4.28,18.74,13.99,68.81,4.49,9.32,9.76,19.5,27.47,22.57,12.31,21.24,39.17,5.33,28.14,17.65,20.12,13.7,37.77,26.73,19.55,12.6,27.95,12.61,19.78,8.85,14.23,35.06,63.8,37.39,67.47,69.38,5.27,11.76,13.89,69.31,19.55,9.69,12.39,12.5,28.48,13.98,45.27,69.15000000000001,12.42,34.86,9.550000000000001,27.44,10.03,106.93,8.48,13.93,16.53,7.94,9.289999999999999,8.050000000000001,7.27]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>year_month<\/th>\n      <th>cod_regsaud<\/th>\n      <th>regiao_saude<\/th>\n      <th>CATEGORIA<\/th>\n      <th>CH<\/th>\n      <th>Porcentagem<\/th>\n      <th>fte40_supply<\/th>\n      <th>direct_supply<\/th>\n      <th>net_supply<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="comparing-demand-and-supply" class="level2">
<h2 class="anchored" data-anchor-id="comparing-demand-and-supply">4.2. Comparing demand and supply</h2>
<p>We will now compare demand vs supply for each health region. the <code>result</code> metric represents the subtraction between the deduced supply and the demand.</p>
<p>The <code>perc</code> metric represents how much supply is currently available to meet, in percentage terms, the total demand needed in the future (2024).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>monthly_demand_supply <span class="ot">&lt;-</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  prof_demand <span class="sc">|&gt;</span>  </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(supply_GO, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ibge"</span><span class="ot">=</span><span class="st">"cod_regsaud"</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"cadre"</span><span class="ot">=</span><span class="st">"CATEGORIA"</span>,                          <span class="st">"month_performed"</span><span class="ot">=</span><span class="st">"year_month"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(month_performed)) <span class="sc">|&gt;</span> </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">result =</span> net_supply <span class="sc">-</span> fte40_demand) <span class="sc">|&gt;</span> </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> (<span class="dv">100</span> <span class="sc">*</span> net_supply)<span class="sc">/</span>fte40_demand)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>anual_demand_supply <span class="ot">&lt;-</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  monthly_demand_supply <span class="sc">|&gt;</span> </span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(ibge, regiao_saude, cadre) <span class="sc">|&gt;</span> </span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">anual_demand =</span> <span class="fu">sum</span>(fte40_demand),</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">anual_net_supply =</span> <span class="fu">sum</span>(net_supply)) <span class="sc">|&gt;</span> </span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">anual_demand =</span> <span class="fu">round</span>(anual_demand, <span class="dv">2</span>),</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">anual_net_supply =</span> <span class="fu">round</span>(anual_net_supply, <span class="dv">2</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">abs_result =</span> anual_net_supply <span class="sc">-</span> anual_demand,</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>           <span class="at">abs_result =</span> <span class="fu">round</span>(abs_result, <span class="dv">2</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">perc_result =</span> (<span class="dv">100</span> <span class="sc">*</span> anual_net_supply)<span class="sc">/</span>anual_demand,</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>           <span class="at">perc_result =</span> <span class="fu">round</span>(perc_result, <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'ibge', 'regiao_saude'. You can override
using the `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(anual_demand_supply)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-dd2e0716d2622c6a2d27" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-dd2e0716d2622c6a2d27">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36"],[52001,52001,52002,52002,52003,52003,52004,52004,52005,52005,52006,52006,52007,52007,52008,52008,52009,52009,52010,52010,52011,52011,52012,52012,52013,52013,52014,52014,52015,52015,52016,52016,52017,52017,52018,52018],["Central","Central","Centro Sul","Centro Sul","Entorno Norte","Entorno Norte","Entorno Sul","Entorno Sul","Estrada de Ferro","Estrada de Ferro","Nordeste I","Nordeste I","Nordeste II","Nordeste II","Norte","Norte","Oeste I","Oeste I","Oeste II","Oeste II","Pirineus","Pirineus","Rio Vermelho","Rio Vermelho","São Patrício I","São Patrício I","Serra da Mesa","Serra da Mesa","Sudoeste I","Sudoeste I","Sudoeste II","Sudoeste II","Sul","Sul","São Patrício II","São Patrício II"],["Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico","Enfermeiro","Médico"],[3638.32,3638.32,2778.94,2778.94,1043.8,1043.8,3208.81,3208.81,798.8099999999999,798.8099999999999,181.23,181.23,402.87,402.87,488.52,488.52,381.75,381.75,331.17,331.17,1475.69,1475.69,700.87,700.87,519.46,519.46,390.52,390.52,1144.61,1144.61,649.6900000000001,649.6900000000001,562.9,562.9,491.35,491.35],[838,1274.54,550.16,745.3200000000001,203.89,243.17,706.5,848.21,229.7,334.84,52.49,59.71,128.69,147.82,111.12,118.21,102.48,107.51,117.97,166.44,473.93,469.64,172.24,231.43,148.71,155.5,92.87,114.33,329.91,422.07,150.08,217.36,208.31,267.72,171.06,238.1],[-2800.32,-2363.78,-2228.78,-2033.62,-839.91,-800.63,-2502.31,-2360.6,-569.11,-463.97,-128.74,-121.52,-274.18,-255.05,-377.4,-370.31,-279.27,-274.24,-213.2,-164.73,-1001.76,-1006.05,-528.63,-469.44,-370.75,-363.96,-297.65,-276.19,-814.7,-722.54,-499.61,-432.33,-354.59,-295.18,-320.29,-253.25],[23.03,35.03,19.8,26.82,19.53,23.3,22.02,26.43,28.76,41.92,28.96,32.95,31.94,36.69,22.75,24.2,26.84,28.16,35.62,50.26,32.12,31.83,24.58,33.02,28.63,29.93,23.78,29.28,28.82,36.87,23.1,33.46,37.01,47.56,34.81,48.46]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>ibge<\/th>\n      <th>regiao_saude<\/th>\n      <th>cadre<\/th>\n      <th>anual_demand<\/th>\n      <th>anual_net_supply<\/th>\n      <th>abs_result<\/th>\n      <th>perc_result<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="demand-vs-supply---graph" class="level3">
<h3 class="anchored" data-anchor-id="demand-vs-supply---graph">4.2.1. Demand vs Supply - Graph</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>anual_demand_supply <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>abs_result, </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>         <span class="sc">-</span>perc_result) <span class="sc">|&gt;</span> </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">"demand_supply"</span>, </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">value =</span> <span class="st">"resultado"</span>, </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>         <span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cadre =</span> <span class="fu">if_else</span>(</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>                    cadre <span class="sc">==</span> <span class="st">"Enfermeiro"</span>,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Nurse"</span>,</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Physician"</span>),</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">demand_supply =</span> <span class="fu">if_else</span>(</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>                    demand_supply <span class="sc">==</span> <span class="st">"anual_demand"</span>,<span class="st">"Need"</span>,<span class="st">"Supply"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(regiao_saude,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>                             resultado), </span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> resultado, </span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> demand_supply)) <span class="sc">+</span> </span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span> </span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>cadre) <span class="sc">+</span> </span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"Health Region"</span>) <span class="sc">+</span> </span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Demand vs Supply"</span>) <span class="sc">+</span> </span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="hrh_model_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="demand-vs-supply---map" class="level3">
<h3 class="anchored" data-anchor-id="demand-vs-supply---map">4.2.2. Demand vs Supply - Map</h3>
<p>We will now ilustrate the results, in terms of percentage, using a map.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>spdf <span class="ot">&lt;-</span> <span class="fu">geojson_read</span>(<span class="st">"data/shape file regioes saude.json"</span>,  <span class="at">what =</span> <span class="st">"sp"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The following map illustrates the distribution of professionals by health regions and indicate that all of them have deficit of professionals, with a variation of results from 20% to 50%. In other words, the health region with the best result would need the double of the current professional to provide the minimum services.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>anual_demand_supply<span class="sc">$</span>ibge <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(anual_demand_supply<span class="sc">$</span>ibge)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>spdf_region <span class="ot">&lt;-</span> spdf[ spdf<span class="sc">@</span>data<span class="sc">$</span>est_id <span class="sc">==</span> <span class="st">"52"</span> , ]</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>spdf_fortified <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_as_sf</span>(spdf_region)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>spdf_fortified <span class="sc">|&gt;</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(anual_demand_supply, <span class="at">by =</span> </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>              <span class="fu">c</span>(<span class="st">"reg_id"</span><span class="ot">=</span><span class="st">"ibge"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cadre =</span> <span class="fu">if_else</span>(cadre <span class="sc">==</span> </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Médico"</span>,</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Physician"</span>,<span class="st">"Nurse"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">percentage =</span> perc_result) <span class="sc">|&gt;</span> </span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> percentage)) <span class="sc">+</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> regiao_saude), </span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">size =</span> <span class="fl">2.5</span>) <span class="sc">+</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"#F8766D"</span>, </span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>                      <span class="at">high =</span> <span class="st">"#00BA38"</span>, </span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>                      <span class="at">n.breaks =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>cadre, <span class="at">nrow =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="hrh_model_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="exploring-cost-implication" class="level2">
<h2 class="anchored" data-anchor-id="exploring-cost-implication">4.3. Exploring cost implication</h2>
<p>The analysis of costs were based only on wages and salaries.</p>
<p>Recently, Brazil Legislative has approved the minimum wage for nursing, which represents R$ 4.750 each month. Other costs were included, representing nearly R$ 6.130.</p>
<p>Physicians do not have a legal minimun wage. The Brazilian Ministry of Work and Labour has a database that captures all monthly movements in the labour market. We analysed data from 06/2022 to 06/2023 for Goias states, which resulted in a mean monthly salary of R$ 8.940. After adding aditional costs, this value represents R$ 11.532,60.</p>
<p>Using a conversion rate of 4.90 reais (R$) to each dollar (R$), the values are:</p>
<table class="table">
<thead>
<tr class="header">
<th>Cadre</th>
<th>Annual Costs (US$)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Nursing</td>
<td>15012.25</td>
</tr>
<tr class="even">
<td>Physician</td>
<td>28241.63</td>
</tr>
</tbody>
</table>
<p>After applying these values to our results, it is possible to capture how much should be invested in order to balance demanda and supply for human resources for health in each health region.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>cost <span class="ot">&lt;-</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  anual_demand_supply <span class="sc">|&gt;</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">abs_result =</span> abs_result <span class="sc">*</span> (<span class="sc">-</span><span class="dv">1</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cadre =</span> <span class="fu">if_else</span>(cadre <span class="sc">==</span> <span class="st">"Enfermeiro"</span>,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Nurse"</span>,<span class="st">"Physician"</span>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cost =</span> <span class="fu">if_else</span>(cadre <span class="sc">==</span> <span class="st">"Nurse"</span>, </span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>                        abs_result <span class="sc">*</span> <span class="fl">15012.25</span>,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>                        abs_result <span class="sc">*</span> <span class="fl">28241.63</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cost_mi =</span> <span class="fu">round</span>((cost<span class="sc">/</span><span class="dv">1000000</span>),<span class="dv">1</span>))</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>cost <span class="sc">|&gt;</span> </span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(regiao_saude,</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>                             cost), </span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> cost_mi)) <span class="sc">+</span> <span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> cost_mi), <span class="at">parse =</span> <span class="dv">2</span>,</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">nudge_y =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>cadre) <span class="sc">+</span> </span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"Health Region"</span>) <span class="sc">+</span> </span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"US$"</span>) <span class="sc">+</span> </span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="hrh_model_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="conducting-sensitivity-analysis" class="level1">
<h1>5. Conducting sensitivity analysis</h1>
<p>The sensitivity analysis was performed using shiny apps. We created an app where user can perform changes in some parameters.</p>
<p>The app can be accessed here.</p>
</section>
<section id="references" class="level1">
<h1>References</h1>
<ol type="1">
<li><p>Asamani, J. A., Christmals, C. D., &amp; Reitsma, G. M. (2021). The needs-based health workforce planning method: a systematic scoping review of analytical applications.&nbsp;<em>Health Policy and Planning</em>,&nbsp;<em>36</em>(8), 1325-1343.</p></li>
<li><p>MacKenzie, A., Tomblin Murphy, G., &amp; Audas, R. (2019). A dynamic, multi-professional, needs-based simulation model to inform human resources for health planning.&nbsp;<em>Human Resources for Health</em>,&nbsp;<em>17</em>, 1-13.</p></li>
</ol>
</section>
<section id="appendix-a---fte" class="level1">
<h1>Appendix A - FTE</h1>
<p>FTE is a commom metric used in workforce planning and <a href="https://www.shrm.org/resourcesandtools/tools-and-samples/hr-qa/pages/full-time-equivalent-hours.aspx#:~:text=The%20calculation%20of%20full%2Dtime,per%20week%20are%200.5%20FTEs.">human resources</a> studies whose objective is to standardize the number of professionals considering the workload.</p>
<p>Consider that, when calculating <strong>demand</strong>, 3200 hours of nurses are needed per month to provide all services. Translating into number of professionals, we have:</p>
<p>3200/126 = 25.39</p>
<p>In other words, given that the workload of a full-time professional - after deducting absences - is 126 hours, we would need 25 professionals for 40 hours and one professional for 16 hours (referring to 0.39).</p>
<p>The metric can also be used to standardize the <strong>supply</strong>. Considering the following table with professionals. How many nurses are there? Immediately, one can think of three nurses. However, they have different workloads. How to standardize this?</p>
<table class="table">
<thead>
<tr class="header">
<th>Name</th>
<th>Cadre</th>
<th>Weekly workload</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mary</td>
<td>Enfermeiro</td>
<td>35</td>
</tr>
<tr class="even">
<td>John</td>
<td>Enfermeiro</td>
<td>25</td>
</tr>
<tr class="odd">
<td>Suzan</td>
<td>Enfermeiro</td>
<td>40</td>
</tr>
</tbody>
</table>
<p>Nurse = 35 + 25 + 40 =&gt; 100 weekly hours</p>
<p>Nurse = 100 x 4.345 = 434.5 monthly hours</p>
<p>Nurse = 434.5/126 =&gt; 3.44 professionals in FTE-40</p>
<p>It can be seen that we have 3.44 full-time equivalent nursing professionals, considering a workload of 40 hours per week.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>